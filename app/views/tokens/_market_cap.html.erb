<p>
  Whole Market:
  $<%= number_with_precision(@market_cap.first.open, precision: 0, delimiter: ',') %>
</p>

<div id="market_cap" style="width: 100%; height: 500px;"></div>

<script>
  google.charts.load('current', {packages: ['corechart', 'line']});
  google.charts.setOnLoadCallback(drawLineColors);

  function drawLineColors() {
    var data = new google.visualization.DataTable();
    data.addColumn('date', 'X');
    data.addColumn('number', 'Price');

    data.addRows([
      <% @market_cap.each do |p| %>
        [
          new Date('<%= p.created_at.rfc2822 %>'),
          <%= p.open %>
        ],
      <% end %>
    ]);

    var options = {
      hAxis: {title: 'Time'},
      vAxis: {title: 'Price'},
      colors: ['#a52714', '#097138', '#4141ef']
    };

    var chart = new google.visualization.LineChart(document.getElementById('market_cap'));
    chart.draw(data, options);
  }
</script>